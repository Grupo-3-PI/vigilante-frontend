<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/dashboard.css">
    <title>Dashboard</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>

<body>

    <div class="navbar">
        <div class="logo">
            <a href="./index.html"><img src="./images/vigilante-logo.png" class="imgLogo"></a>
            <img src="./images/hamburguer-icon.png" class="imgHamburguer">
        </div>

        <div class="menu-nav">

            <div class="tituloDashboard"><img src="./images/dashboard-icon.png" class="imgDashboard">Dashboard</div>

            <div class="caixa-municipios">
                <div onclick="exibirMunicipios()" class="botao-municipios" id="botao-municipio">
                    <div class="divImgMap"><img src="./images/map-icon.png" class="imgMap">Municípios</div>▴
                </div>
                <div id="opcoes-municipio" class="opcoes-municipio">
                    <p class="opcao-municipio" id="opcao-municipio1" onclick="selecionarMunicipio(1)">Bertioga</p>
                    <p class="opcao-municipio" id="opcao-municipio2" onclick="selecionarMunicipio(2)">Cubatão</p>
                    <p class="opcao-municipio" id="opcao-municipio3" onclick="selecionarMunicipio(3)">Guarujá</p>
                    <p class="opcao-municipio" id="opcao-municipio4" onclick="selecionarMunicipio(4)">Itanhaém</p>
                    <p class="opcao-municipio" id="opcao-municipio5" onclick="selecionarMunicipio(5)">Mongaguá</p>
                    <p class="opcao-municipio" id="opcao-municipio6" onclick="selecionarMunicipio(6)">Peruíbe</p>
                    <p class="opcao-municipio" id="opcao-municipio7" onclick="selecionarMunicipio(7)">Praia Grande</p>
                    <p class="opcao-municipio" id="opcao-municipio8" onclick="selecionarMunicipio(8)">Santos</p>
                    <p class="opcao-municipio" id="opcao-municipio9" onclick="selecionarMunicipio(9)">São Vicente</p>
                </div>
            </div>

            <div class="caixa-anos">
                <div onclick="exibirAnos()" class="botao-anos" id="botao-anos">
                    <div class="divImgAno"><img src="./images/ano-icon.png" class="imgAno">Ano</div>
                    ▴
                </div>
                <div id="opcoes-anos" class="opcoes-anos">
                    <p class="opcao-ano" id="opcao-ano1" onclick="selecionarAno(1)">2025</p>
                    <p class="opcao-ano" id="opcao-ano2" onclick="selecionarAno(2)">2024</p>
                    <p class="opcao-ano" id="opcao-ano3" onclick="selecionarAno(3)">2023</p>
                </div>
            </div>

        </div>
        <div class="sair">
            <a href="">Sair</a>
        </div>
    </div>
    <div class="conteudo">

        <div class="titulo">
            <div class="municipio">
                Dashboard - Município
            </div>
            <div class="usuario">
                Nome do Usuario
            </div>
        </div>

        <div class="dados">

            <div class="area-graficos">

            </div>
            <div class="area-tabela">
                <div class="titulo-tabela">Ranking de Segurança dos Municípios</div>
                <div class="dados-tabela">
                    <table class="tabela" id="tabela">
                        <thead>
                            <tr>
                                <th>
                                    
                                </th>
                                <th>
                                    Município
                                </th>
                                <th>
                                    Score
                                </th>
                                <th>
                                    Crimes
                                </th>
                                <th>
                                    Status
                                </th>
                            </tr>
                        </thead>
                        <tbody id="corpo-tabela">

                        </tbody>
                    </table>
                </div>

            </div>

        </div>
    </div>

</body>

</html>

<script>

    const municipios = ["Bertioga", "Cubatão", "Guarujá", "Itanhaém", "Mangaguá", "Peruíbe", "Praia Grande", "Santos", "São Vincente"];


    function carregarTabela() {

        municipios.forEach((municipio) => {

            // Provisório
            var score = (Math.random() * 6 + 4).toFixed(1)
            var crimes = (Math.random() * 400 + 1000).toFixed()
            var status
            var seta
            if (score >= 7) {
                status = "<span style='color:lime'>Seguro</span>"
                seta = "<img src='./images/seta-up.png' class='imgSeta'/>"
            } else if (score >= 5) {
                status = "<span style='color:yellow'>Moderado</span>"
                seta = "<img src='./images/seta-mid.png' class='imgSeta'/>"
            } else {
                status = "<span style='color:red'>Inseguro</red>"
                seta = "<img src='./images/seta-down.png' class='imgSeta'/>"
            }
            document.getElementById("corpo-tabela").innerHTML += `<tr class="linha-tabela"><td>${seta}</td><td>${municipio}</td><td>${score}</td><td>${crimes}</td><td>${status}</td></tr>`

        })
    }

    window.onload(carregarTabela())

    function exibirMunicipios() {
        if (document.getElementById("opcoes-municipio").style.display == "") {
            document.getElementById("opcoes-municipio").style.display = "flex";
            document.getElementById("botao-municipio").style.backgroundColor = "#f0f0f0";
            document.getElementById("botao-municipio").innerHTML = document.getElementById("botao-municipio").innerHTML.replace("▴", "▾");

        } else {
            document.getElementById("opcoes-municipio").style.display = "";
            document.getElementById("botao-municipio").style.backgroundColor = "#fff";
            document.getElementById("botao-municipio").innerHTML = document.getElementById("botao-municipio").innerHTML.replace("▾", "▴");
        }

    }

    function selecionarMunicipio(municipio) {
        for (var i = 1; i <= 9; i++) {
            document.getElementById("opcao-municipio" + i).style.color = "black"
            document.getElementById("opcao-municipio" + i).style.fontWeight = "normal"
        }
        document.getElementById("opcao-municipio" + municipio).style.color = "#fea40b"
        document.getElementById("opcao-municipio" + municipio).style.fontWeight = "bolder"
    }

    function exibirAnos() {
        if (document.getElementById("opcoes-anos").style.display == "") {
            document.getElementById("opcoes-anos").style.display = "flex";
            document.getElementById("botao-anos").style.backgroundColor = "#f0f0f0";
            document.getElementById("botao-anos").innerHTML = document.getElementById("botao-anos").innerHTML.replace("▴", "▾");

        } else {
            document.getElementById("opcoes-anos").style.display = "";
            document.getElementById("botao-anos").style.backgroundColor = "#fff";
            document.getElementById("botao-anos").innerHTML = document.getElementById("botao-anos").innerHTML.replace("▾", "▴");
        }
    }

    function selecionarAno(ano) {
        for (var i = 1; i <= 3; i++) {
            document.getElementById("opcao-ano" + i).style.color = "black"
            document.getElementById("opcao-ano" + i).style.fontWeight = "normal"
        }
        document.getElementById("opcao-ano" + ano).style.color = "#fea40b"
        document.getElementById("opcao-ano" + ano).style.fontWeight = "bolder"
    }

</script>